!function(n,r){if("function"==typeof define&&define.amd)define(["lodash"],function(e){return n.collec=r(e)});else if("object"==typeof exports){var e=require("lodash");module.exports=r(e)}else n.collec=r(n.lodash)}(this,function(n){function r(r){function e(){return r}function t(){return r.length}function i(e){if(!e)throw new Error("id required");return n.find(r,function(n){return n[v]==e})}function o(e){var t={};return t[v]=e,n.findIndex(r,t)}function u(r,e){var t=f.bind(null,r);n.isArray(e)?n.each(e,t):t(e)}function f(n,e){var t=e[v];if(!t)throw new Error("Must provide an object with "+v);var i=o(t);i>=0?n?s(i,e):r[i]=e:r.push(e)}function c(n){u(!1,n)}function l(r){n.isArray(r)?n.each(r,d):d(r)}function d(e){if(!e)throw new Error("Must provide an id");r=n.reject(r,function(n){return n[v]==e})}function a(n){u(!0,n)}function s(e,t){var i=r[e];n.assign(i,t)}function h(n){v=n}var v="id";return{add:c,all:e,count:t,filter:n.filter.bind(null,r),get:i,getIndex:o,replace:c,remove:l,update:a,setKey:h}}if(null==n)throw new Error("lodash is null");return r});